<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <title>¬ed</title>
    <link rel="icon" type="image/svg+xml" href="assets/notedLogo.svg">
</head>

<!-- Custom Title Bar -->
<div class="title-bar" id="title-bar">
  <div class="title-bar-drag-region">
    <div class="title-bar-logo-container">
      <svg class="title-bar-logo" viewBox="0 0 280 200" xmlns="http://www.w3.org/2000/svg">
        <!-- Horizontal bar -->
        <rect x="12.3" y="20" width="255.4" height="80.2" rx="29.25" fill="currentColor"/>
        <!-- Vertical bar -->
        <rect x="210.3" y="23" width="77.4" height="173" rx="29.25" fill="currentColor"/>
        <!-- Bottom bar -->
        <rect x="12.3" y="115.8" width="186.6" height="80" rx="29.25" fill="currentColor"/>
      </svg>
      <span class="title-bar-text">not|ed</span>
      <span class="app-version">v1.0.5</span>
    </div>
  </div>
  <div class="title-bar-controls">
    <button class="title-bar-control pin" id="pin-btn" title="Pin window to stay on top">
      <svg class="pin-icon-unpinned" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 17v5"/>
        <path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/>
      </svg>
      <svg class="pin-icon-pinned" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
        <path d="M12 17v5"/>
        <path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/>
        <path d="m2 2 20 20"/>
        <path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/>
      </svg>
    </button>
    <button class="title-bar-control minimize" id="minimize-btn">
      <svg width="10" height="10" viewBox="0 0 10 10">
        <path d="M0,5 L10,5" stroke="white" stroke-width="1"/>
      </svg>
    </button>
    <button class="title-bar-control maximize" id="maximize-btn">
      <svg width="10" height="10" viewBox="0 0 10 10">
        <path d="M1,1 L9,1 L9,9 L1,9 Z" stroke="white" stroke-width="1" fill="none"/>
      </svg>
    </button>
    <button class="title-bar-control close" id="close-btn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#e5e5e5" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6 6 18"/>
        <path d="m6 6 12 12"/>
      </svg>
    </button>
  </div>
</div>

<!-- Tab Bar -->
<div class="tab-bar">
  <div class="tab-container">
    <button class="tab-add-btn" id="add-tab-btn">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12h14"/>
      </svg>
    </button>
  </div>
</div>

<main>
  <div class="quick-add-container">
    <input type="text" id="quick-add-input" placeholder="Type a task and press Enter..." />
    
    <!-- Stats Panel -->
    <div class="stats-panel">
      <div class="stat-row">
        <span class="stat-label">Today:</span>
        <span class="stat-numbers">
          <span class="stat-number completed" id="tasks-completed-today">0</span>
          <span class="stat-separator">/</span>
          <span class="stat-number due" id="tasks-due-today">0</span>
        </span>
      </div>
      <div class="stat-divider">|</div>
      <div class="stat-row">
        <span class="stat-label">All:</span>
        <span class="stat-numbers">
          <span class="stat-number completed" id="all-tasks-completed">0</span>
          <span class="stat-separator">/</span>
          <span class="stat-number due" id="all-tasks-total">0</span>
        </span>
      </div>
    </div>
    
    <!-- Weekly Tasks Panel -->
    <div class="weekly-panel" id="weekly-panel">
      <!-- Days will be dynamically generated by JavaScript -->
    </div>
  </div>
  <div class="task-list">
    <!-- Tasks will be added here dynamically -->
  </div>
  
  <!-- Edit Modal -->
  <div id="edit-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Edit</h3>
        <button class="modal-close" id="edit-close-btn">×</button>
      </div>
      <div class="modal-body">
        <textarea id="edit-input" class="edit-task-input" placeholder="Edit task name" rows="1"></textarea>
        <div class="due-date-section">
          <label for="due-date-input" class="due-date-label">Due Date & Time</label>
          <div class="due-date-controls">
            <div class="date-time-picker">
              <div class="date-picker-section">
                <label class="picker-label">Date</label>
                <input type="date" id="date-input" class="date-input" />
              </div>
              <div class="time-picker-section">
                <label class="picker-label">Time</label>
                <div class="time-picker" id="time-picker">
                  <div class="time-display" id="time-display">
                    <span class="hour" id="hour-display">12</span>
                    <span class="separator">:</span>
                    <span class="minute" id="minute-display">00</span>
                    <span class="period" id="period-display">PM</span>
                  </div>
                  <div class="time-picker-controls" id="time-picker-controls" style="display: none;">
                    <div class="time-wheel-container">
                      <div class="time-wheel" id="hour-wheel">
                        <div class="wheel-label">Hour</div>
                        <div class="wheel-items" id="hour-items"></div>
                      </div>
                      <div class="time-wheel" id="minute-wheel">
                        <div class="wheel-label">Minute</div>
                        <div class="wheel-items" id="minute-items"></div>
                      </div>
                      <div class="time-wheel" id="period-wheel">
                        <div class="wheel-label">Period</div>
                        <div class="wheel-items" id="period-items">
                          <div class="wheel-item" data-value="AM">AM</div>
                          <div class="wheel-item" data-value="PM">PM</div>
                        </div>
                      </div>
                    </div>
                    <div class="time-picker-actions">
                      <button type="button" id="time-picker-cancel" class="time-action-btn secondary">Cancel</button>
                      <button type="button" id="time-picker-ok" class="time-action-btn primary">OK</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <button type="button" id="clear-due-btn" class="clear-due-btn">Clear</button>
          </div>
        </div>
        
        <div class="repeat-section">
          <label for="repeat-select" class="repeat-label">Repeat</label>
          <div class="repeat-controls">
            <select id="repeat-select" class="repeat-select">
              <option value="none">Don't repeat</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="edit-delete-btn" class="btn btn-delete">
          <i data-lucide="trash-2"></i>
        </button>
      </div>
    </div>
  </div>
</main>

<!-- Right Sidebar -->
<div class="right-sidebar">
  <button class="settings-btn" id="settings-btn-sidebar" title="Settings">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
      <circle cx="12" cy="12" r="3"/>
    </svg>
  </button>
</div>

<!-- Floating Settings Button -->
<button class="settings-btn floating-settings-btn" id="settings-btn" title="Settings">
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"/>
    <circle cx="12" cy="12" r="3"/>
  </svg>
</button>

<!-- Context Menu -->
<div class="context-menu" id="context-menu">
  <button class="context-menu-item" id="context-rename">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
      <path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"/>
    </svg>
    Rename
  </button>
  <button class="context-menu-item" id="context-clear">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 6h18"/>
      <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/>
    </svg>
    Clear Tasks
  </button>
  <button class="context-menu-item" id="context-color">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="13.5" cy="6.5" r=".5"/>
      <circle cx="17.5" cy="10.5" r=".5"/>
      <circle cx="8.5" cy="7.5" r=".5"/>
      <circle cx="6.5" cy="12.5" r=".5"/>
      <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/>
    </svg>
    Set Color
  </button>
  <div class="context-menu-separator"></div>
  <button class="context-menu-item danger" id="context-delete">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 6h18"/>
      <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/>
      <path d="M10 11v6"/>
      <path d="M14 11v6"/>
    </svg>
    Delete Tab
  </button>
</div>

<!-- Tab Color Picker Modal -->
<div class="tab-color-modal" id="tab-color-modal" style="display: none;">
  <div class="tab-color-content">
    <div class="tab-color-header">
      <h3>Choose Tab Color</h3>
      <button class="tab-color-close" id="tab-color-close">&times;</button>
    </div>
    <div class="tab-color-grid">
      <div class="tab-color-option default" data-color="" title="Default"></div>
      <div class="tab-color-option" data-color="#ef4444" style="background-color: #ef4444;" title="Red"></div>
      <div class="tab-color-option" data-color="#f97316" style="background-color: #f97316;" title="Orange"></div>
      <div class="tab-color-option" data-color="#eab308" style="background-color: #eab308;" title="Yellow"></div>
      <div class="tab-color-option" data-color="#22c55e" style="background-color: #22c55e;" title="Green"></div>
      <div class="tab-color-option" data-color="#06b6d4" style="background-color: #06b6d4;" title="Cyan"></div>
      <div class="tab-color-option" data-color="#3b82f6" style="background-color: #3b82f6;" title="Blue"></div>
      <div class="tab-color-option" data-color="#8b5cf6" style="background-color: #8b5cf6;" title="Purple"></div>
      <div class="tab-color-option" data-color="#ec4899" style="background-color: #ec4899;" title="Pink"></div>
      <div class="tab-color-option" data-color="#64748b" style="background-color: #64748b;" title="Gray"></div>
    </div>
  </div>
</div>

<!-- Settings Modal -->
<div id="settings-modal" class="modal-overlay" style="display:none;">
  <div class="modal-content settings-modal">
    <div class="modal-header">
      <h2 class="modal-title">Settings</h2>
      <button class="modal-close" id="settings-close-btn">&times;</button>
    </div>
    <div class="modal-body settings-body">
      
      <!-- Theme Setting -->
      <div class="setting-section">
        <h3 class="setting-title">Appearance</h3>
        <div class="setting-item">
          <label class="setting-label">Theme</label>
          <div class="setting-control">
            <div class="theme-toggle">
              <input type="radio" id="theme-dark" name="theme" value="dark" checked>
              <label for="theme-dark" class="theme-option">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                </svg>
                Dark
              </label>
              <input type="radio" id="theme-light" name="theme" value="light">
              <label for="theme-light" class="theme-option">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="5"/>
                  <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                </svg>
                Light
              </label>
            </div>
          </div>
        </div>
        
        <!-- Accent Color Setting -->
        <div class="setting-item">
          <label class="setting-label">Accent Color</label>
          <div class="setting-control">
            <div class="color-picker">
              <div class="color-option" data-color="#7662cf" style="background: #7662cf;" title="Purple"></div>
              <div class="color-option" data-color="#3b82f6" style="background: #3b82f6;" title="Blue"></div>
              <div class="color-option" data-color="#10b981" style="background: #10b981;" title="Green"></div>
              <div class="color-option" data-color="#f59e0b" style="background: #f59e0b;" title="Orange"></div>
              <div class="color-option" data-color="#ef4444" style="background: #ef4444;" title="Red"></div>
              <div class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;" title="Violet"></div>
              <div class="color-option" data-color="#06b6d4" style="background: #06b6d4;" title="Cyan"></div>
              <div class="color-option" data-color="#84cc16" style="background: #84cc16;" title="Lime"></div>
            </div>
          </div>
        </div>
        
        <!-- Tab Color Gradient Setting -->
        <div class="setting-item">
          <div class="setting-toggle">
            <label class="setting-label">Use Tab Color for Background Gradient</label>
            <input type="checkbox" id="tab-color-gradient-toggle" class="toggle-input">
            <label for="tab-color-gradient-toggle" class="toggle-label"></label>
          </div>
          <div class="setting-description">
            When enabled, the background gradient will use the active tab's color instead of the accent color
          </div>
        </div>
        
        <!-- Zoom Level Setting -->
        <div class="setting-item">
          <label class="setting-label">Zoom Level</label>
          <div class="setting-control">
            <div class="zoom-control">
              <div class="zoom-info">
                <span class="zoom-description">Control the zoom level to adjust the size of the interface</span>
                <span class="zoom-percentage" id="zoom-percentage">100%</span>
              </div>
              <div class="zoom-slider-container">
                <div class="zoom-marks">
                  <span class="zoom-mark" data-value="50">50</span>
                  <span class="zoom-mark" data-value="67">67</span>
                  <span class="zoom-mark" data-value="75">75</span>
                  <span class="zoom-mark" data-value="80">80</span>
                  <span class="zoom-mark" data-value="90">90</span>
                  <span class="zoom-mark" data-value="100">100</span>
                  <span class="zoom-mark" data-value="110">110</span>
                  <span class="zoom-mark" data-value="125">125</span>
                  <span class="zoom-mark" data-value="150">150</span>
                  <span class="zoom-mark" data-value="175">175</span>
                  <span class="zoom-mark" data-value="200">200</span>
                </div>
                <input type="range" id="zoom-slider" class="zoom-slider" min="50" max="200" value="100" step="1">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Time Format Setting -->
      <div class="setting-section">
        <h3 class="setting-title">Time & Date</h3>
        <div class="setting-item">
          <label class="setting-label">Time Format</label>
          <div class="setting-control">
            <div class="time-format-toggle">
              <input type="radio" id="time-12h" name="timeFormat" value="12h" checked>
              <label for="time-12h" class="format-option">12h (5:30 PM)</label>
              <input type="radio" id="time-24h" name="timeFormat" value="24h">
              <label for="time-24h" class="format-option">24h (17:30)</label>
            </div>
          </div>
        </div>
        
        <!-- End of Work Time Setting -->
        <div class="setting-item">
          <label class="setting-label">Default End of Work Time</label>
          <div class="setting-control">
            <div class="work-time-picker">
              <select id="work-end-hour" class="time-select">
                <!-- Options will be populated by JavaScript -->
              </select>
              <span class="time-separator">:</span>
              <select id="work-end-minute" class="time-select">
                <option value="0">00</option>
                <option value="15">15</option>
                <option value="30">30</option>
                <option value="45">45</option>
              </select>
              <select id="work-end-period" class="time-select period-select">
                <option value="AM">AM</option>
                <option value="PM">PM</option>
              </select>
            </div>
            <div class="setting-description">
              This time will be used as the default when you type "today" without specifying a time.
            </div>
          </div>
        </div>
      </div>

      <!-- Notifications Setting -->
      <div class="setting-section">
        <h3 class="setting-title">Notifications</h3>
        <div class="setting-item">
          <label class="setting-label">Desktop Notifications</label>
          <div class="setting-control">
            <div class="notification-toggle">
              <input type="checkbox" id="notifications-enabled" checked>
              <label for="notifications-enabled" class="toggle-option">Enable notifications for upcoming tasks</label>
            </div>
          </div>
        </div>
        
        <div class="setting-item">
          <label class="setting-label">Notification Timing</label>
          <div class="setting-control">
            <div class="notification-timing">
              <div class="timing-item">
                <input type="checkbox" id="notify-1hour" checked>
                <label for="notify-1hour" class="timing-label">1 hour before</label>
              </div>
              <div class="timing-item">
                <input type="checkbox" id="notify-10min" checked>
                <label for="notify-10min" class="timing-label">10 minutes before</label>
              </div>
              <div class="timing-item">
                <input type="checkbox" id="notify-5min">
                <label for="notify-5min" class="timing-label">5 minutes before</label>
              </div>
              <div class="timing-item">
                <input type="checkbox" id="notify-ontime">
                <label for="notify-ontime" class="timing-label">When task is due</label>
              </div>
            </div>
            <div class="setting-description">
              Choose when you want to be notified about upcoming tasks.
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="modal-footer">
      <div class="unsaved-indicator" id="unsaved-indicator" style="display: none;">
        <span class="unsaved-text">• unsaved changes</span>
      </div>
      <div class="modal-footer-buttons">
        <button class="btn btn-secondary" id="settings-cancel-btn">Cancel</button>
        <button class="btn btn-primary" id="settings-save-btn">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<script src="./renderer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>